
project(library)
cmake_minimum_required(VERSION 2.8)

include( ${CMAKE_SOURCE_DIR}/OpenLibrary.cmake )
include( ${CMAKE_SOURCE_DIR}/cmake/functions.cmake )
include( ${CMAKE_SOURCE_DIR}/cmake/cmake_tests.cmake )

#prepare target for autogenerated files
add_custom_target(autogenerated ALL)

#prepare target for cration of cmake variables for each sub-library of OpenLibrary
generate_variables_file()

unset(OPENLIBRARY_REGISTERED_LIBRARIES CACHE)

#generate file with export/import stuff for sublibraries
prepareExportFile(${CMAKE_SOURCE_DIR}/OpenLibraryExports.hpp)

add_subdirectory(htmlParser htmlParser)
#add_subdirectory(qextserialport qextserialport)
add_subdirectory(router router)
add_subdirectory(QtExt QtExt)
add_subdirectory(utils utils)
add_subdirectory(math math)

set(LIBRARY_HEADERS debug.hpp std_macros.hpp str_op.hpp)

register_library(common HEADERS ${LIBRARY_HEADERS})


# install(FILES cmake/ForceAddFlags.cmake
#         DESTINATION ${CMAKE_INSTALL_PREFIX}/share/cmake/Modules
#         PERMISSIONS OWNER_READ GROUP_READ WORLD_READ)

runTests()
